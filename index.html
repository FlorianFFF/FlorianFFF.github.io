<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="./bootstrap.min.css">
<style type="text/css">
.header {
  padding-bottom: 10px;
  border-bottom: 1px solid #e5e5e5;
}

.footer {
  padding-top: 10px;
  color: #777;
  border-top: 1px solid #e5e5e5;
}
</style>

<script src="./d3.v3.min.js"></script>
<script src="./topojson.v1.min.js"></script>
<script src="./datamaps.none.min.js"></script>
<script src="./jquery-3.2.1.min.js"></script>
<script src="./bootstrap.min.js"></script>
</head>
<body>

<div class="container">
  <header class="header clearfix">
    <h1 class="">University selector</h1>
    <h3 class="text-muted">Select a university below</h3>
  </header>
  <div class="row">
    <div class="col-md-6">
      <div id="arcs" style="height: 500px; width: 486px;"></div>
    </div>
    <div class="col-md-6">
        <div class="row">
          <div class="col-md-12">Span 2</div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <svg id="uni" width="486" height="486" font-family="sans-serif" font-size="10" text-anchor="middle"></svg>
          </div>
        </div>
    </div>
  </div>
  <footer class="footer">
    <p>&copy; 2017 Florian Fikkert &amp; Sander Koning</p>
  </footer>
</div>


<script>
  var map = new Datamap({
    element: document.getElementById('arcs'),
    geographyConfig: {
      dataUrl: 'new.json'
    },
    scope: 'townships',
    fills: {
      defaultFill: '#dbdbeb',
      hasUni: '#7577CD'
    },
    data: {
      "Amsterdam": {fillKey: "hasUni"},
      "Breda": {fillKey: "hasUni"},
      "Delft": {fillKey: "hasUni"},
      "Eindhoven": {fillKey: "hasUni"},
      "Enschede": {fillKey: "hasUni"},
      "Groningen (Gr)": {fillKey: "hasUni"},
      "Leiden": {fillKey: "hasUni"},
      "Maastricht": {fillKey: "hasUni"},
      "Nijmegen": {fillKey: "hasUni"},
      "Rotterdam": {fillKey: "hasUni"},
      "Tilburg": {fillKey: "hasUni"},
      "Utrecht (Ut)": {fillKey: "hasUni"},
      "Wageningen": {fillKey: "hasUni"}
    },
    setProjection: function(element) {
      var projection = d3.geo.mercator()
        .center([6, 52])
        .scale(6000)
        .translate([element.offsetWidth / 2 + 95, element.offsetHeight / 2 + 40]);

       var path = d3.geo.path().projection(projection);
       return {path: path, projection: projection};
    }
  });
  $(function(){
    $("#arcs").click(function(event){
      $("header > h3").text("");
      var target = $(event.target);
      if(target.hasClass("datamaps-subunit")){
        switch(target.attr("class").substring(17)){
          case "Amsterdam":
          case "Breda":
          case "Delft":
          case "Eindhoven":
          case "Enschede":
          case "Groningen (Gr)":
          case "Leiden":
          case "Maastricht":
          case "Nijmegen":
          case "Rotterdam":
          case "Tilburg":
          case "Utrecht (Ut)":
          case "Wageningen":
            $("header > h3").text(target.attr("class").substring(17));
            //uni(target.attr("class").substring(17));
            break;
          default:
            $("header > h3").text("This municipality doesn't have a university");
        }
      }
    });
  });

</script>
</body>
</html>
